{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "MCP Tools Expansion - Tool Schemas",
  "description": "JSON Schema definitions for the 5 new MCP tools",
  "tools": [
    {
      "name": "fo-databox-list",
      "description": "List documents in a FinanzOnline databox",
      "inputSchema": {
        "type": "object",
        "properties": {
          "account_id": {
            "type": "string",
            "description": "The account identifier (TID or alias)"
          },
          "from_date": {
            "type": "string",
            "description": "Start date filter (YYYY-MM-DD format)",
            "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
          },
          "to_date": {
            "type": "string",
            "description": "End date filter (YYYY-MM-DD format)",
            "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
          }
        },
        "required": ["account_id"]
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "documents": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "document_id": { "type": "string" },
                "description": { "type": "string" },
                "date": { "type": "string" },
                "type_code": { "type": "string" },
                "type_name": { "type": "string" },
                "action_required": { "type": "boolean" }
              }
            }
          },
          "count": { "type": "integer" }
        }
      }
    },
    {
      "name": "fo-databox-download",
      "description": "Download a document from a FinanzOnline databox",
      "inputSchema": {
        "type": "object",
        "properties": {
          "account_id": {
            "type": "string",
            "description": "The account identifier (TID or alias)"
          },
          "document_id": {
            "type": "string",
            "description": "The document ID (applkey) from databox list"
          }
        },
        "required": ["account_id", "document_id"]
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "document_id": { "type": "string" },
          "filename": { "type": "string" },
          "content_base64": { "type": "string" },
          "content_length": { "type": "integer" }
        }
      }
    },
    {
      "name": "fo-fb-search",
      "description": "Search for companies in the Austrian Firmenbuch (company register)",
      "inputSchema": {
        "type": "object",
        "properties": {
          "query": {
            "type": "string",
            "description": "Company name or search term"
          },
          "location": {
            "type": "string",
            "description": "Filter by city/location"
          },
          "max_results": {
            "type": "integer",
            "description": "Maximum number of results (default: 20)",
            "minimum": 1,
            "maximum": 100
          }
        },
        "required": ["query"]
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "total_count": { "type": "integer" },
          "results": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "fn": { "type": "string" },
                "company_name": { "type": "string" },
                "legal_form": { "type": "string" },
                "location": { "type": "string" },
                "status": { "type": "string" }
              }
            }
          }
        }
      }
    },
    {
      "name": "fo-fb-extract",
      "description": "Get full company details from the Austrian Firmenbuch",
      "inputSchema": {
        "type": "object",
        "properties": {
          "fn": {
            "type": "string",
            "description": "Firmenbuch number (e.g., FN123456a)",
            "pattern": "^FN\\d{1,9}[a-z]$"
          }
        },
        "required": ["fn"]
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "fn": { "type": "string" },
          "company_name": { "type": "string" },
          "legal_form": { "type": "string" },
          "location": { "type": "string" },
          "address": {
            "type": "object",
            "properties": {
              "street": { "type": "string" },
              "postal_code": { "type": "string" },
              "city": { "type": "string" },
              "country": { "type": "string" }
            }
          },
          "share_capital_eur": { "type": "number" },
          "currency": { "type": "string" },
          "status": { "type": "string" },
          "founding_date": { "type": "string" },
          "last_change": { "type": "string" },
          "business_purpose": { "type": "string" },
          "vat_id": { "type": "string" },
          "directors": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "first_name": { "type": "string" },
                "last_name": { "type": "string" },
                "function": { "type": "string" },
                "representation": { "type": "string" },
                "since": { "type": "string" }
              }
            }
          },
          "shareholders": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "name": { "type": "string" },
                "fn": { "type": "string" },
                "share_percent": { "type": "number" },
                "contribution_eur": { "type": "number" }
              }
            }
          }
        }
      }
    },
    {
      "name": "fo-uva-submit",
      "description": "Submit a UVA (VAT advance return) to FinanzOnline",
      "inputSchema": {
        "type": "object",
        "properties": {
          "account_id": {
            "type": "string",
            "description": "The account identifier (TID or alias)"
          },
          "year": {
            "type": "integer",
            "description": "Tax year (e.g., 2025)",
            "minimum": 2000,
            "maximum": 2100
          },
          "period_type": {
            "type": "string",
            "description": "Period type: monthly or quarterly",
            "enum": ["monthly", "quarterly"]
          },
          "period_value": {
            "type": "integer",
            "description": "Period value: 1-12 for monthly, 1-4 for quarterly",
            "minimum": 1,
            "maximum": 12
          },
          "kz_values": {
            "type": "object",
            "description": "KZ (Kennzahl) values in cents",
            "properties": {
              "kz000": { "type": "integer", "description": "Total deliveries" },
              "kz001": { "type": "integer", "description": "Intra-community deliveries" },
              "kz011": { "type": "integer", "description": "Tax-free without input tax" },
              "kz017": { "type": "integer", "description": "Standard rate 20%" },
              "kz018": { "type": "integer", "description": "Reduced rate 10%" },
              "kz019": { "type": "integer", "description": "Reduced rate 13%" },
              "kz020": { "type": "integer", "description": "Other rates" },
              "kz022": { "type": "integer", "description": "Import VAT" },
              "kz029": { "type": "integer", "description": "Intra-community acquisitions" },
              "kz060": { "type": "integer", "description": "Input tax" },
              "kz065": { "type": "integer", "description": "Import VAT as input tax" },
              "kz066": { "type": "integer", "description": "Input tax from IC acquisitions" },
              "kz070": { "type": "integer", "description": "Other corrections" }
            }
          }
        },
        "required": ["account_id", "year", "period_type", "period_value", "kz_values"]
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "success": { "type": "boolean" },
          "reference": { "type": "string" },
          "message": { "type": "string" },
          "period": { "type": "string" },
          "submitted_at": { "type": "string" }
        }
      }
    }
  ],
  "errorSchema": {
    "type": "object",
    "properties": {
      "error": { "type": "boolean", "const": true },
      "error_type": {
        "type": "string",
        "enum": ["validation", "authentication", "service", "not_found"]
      },
      "message": { "type": "string" },
      "details": {
        "type": "object",
        "additionalProperties": { "type": "string" }
      }
    },
    "required": ["error", "error_type", "message"]
  }
}
